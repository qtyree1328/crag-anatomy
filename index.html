<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CragAnatomy</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Newsreader:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #F8F6F3;
            --bg-warm: #FDF9F3;
            --surface: #FFFFFF;
            --text: #2D2A26;
            --text-secondary: #5C5752;
            --text-muted: #8A8580;
            --coral: #E8927C;
            --coral-soft: #FAE8E4;
            --sage: #7BA38F;
            --sage-soft: #E4F0E8;
            --sand: #D4C4A8;
            --sand-soft: #F5F0E6;
            --sky: #8BAEC4;
            --sky-soft: #E4EEF4;
            --gold: #C9A227;
            --gold-soft: #FDF6E3;
            --shadow-soft: 0 4px 20px rgba(45, 42, 38, 0.06);
            --radius: 24px;
            --radius-sm: 16px;
            --sans: 'Space Grotesk', system-ui, sans-serif;
            --serif: 'Newsreader', Georgia, serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { height: 100%; overflow: hidden; }
        body {
            font-family: var(--sans);
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .app {
            height: 100%;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background: var(--bg-warm);
        }

        .blob {
            position: fixed;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.4;
            pointer-events: none;
            animation: float 20s ease-in-out infinite;
        }
        .blob-1 { width: 300px; height: 300px; background: var(--coral-soft); top: -100px; right: -100px; }
        .blob-2 { width: 250px; height: 250px; background: var(--sage-soft); bottom: 20%; left: -80px; animation-delay: -7s; }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-10px, 10px); }
        }

        .view {
            position: absolute;
            inset: 0;
            display: none;
            flex-direction: column;
            z-index: 1;
        }
        .view.active { display: flex; z-index: 10; }

        .header {
            padding: 16px 20px;
            padding-top: max(16px, env(safe-area-inset-top));
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .logo {
            font-family: var(--serif);
            font-size: 22px;
            font-weight: 600;
        }
        .logo span { color: var(--coral); }

        .session-pill {
            background: var(--surface);
            border-radius: 999px;
            padding: 8px 14px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            box-shadow: var(--shadow-soft);
        }
        .session-pill strong { color: var(--coral); }

        .home-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0 20px 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .hero-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 32px 0;
        }

        .hero-icon {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
            overflow: hidden;
        }
        
        .hero-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-title {
            font-family: var(--serif);
            font-size: 28px;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 15px;
            max-width: 260px;
        }

        .climb-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--coral) 0%, #D4765F 100%);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-family: var(--sans);
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(232, 146, 124, 0.35);
            margin-bottom: 16px;
            flex-shrink: 0;
        }
        .climb-btn:active { transform: scale(0.98); }

        .next-card {
            background: var(--surface);
            border-radius: var(--radius-sm);
            padding: 16px;
            box-shadow: var(--shadow-soft);
            flex-shrink: 0;
        }

        .next-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            font-weight: 600;
            margin-bottom: 6px;
        }

        .next-muscle {
            font-family: var(--serif);
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .next-region {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .preclimb-header {
            padding: 16px 20px;
            padding-top: max(16px, env(safe-area-inset-top));
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            background: var(--surface);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-soft);
            font-size: 18px;
        }

        .preclimb-title-bar { flex: 1; }
        .preclimb-title-bar h1 {
            font-family: var(--serif);
            font-size: 20px;
            font-weight: 500;
            line-height: 1.2;
        }
        .preclimb-title-bar p {
            font-size: 12px;
            color: var(--text-muted);
            font-style: italic;
        }

        .preclimb-scroll {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0 20px;
        }

        .anatomy-visual {
            background: linear-gradient(135deg, #f0ede8 0%, #e5e0d8 100%);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        .anatomy-visual img {
            max-width: 100%;
            max-height: 200px;
            object-fit: contain;
            border-radius: 12px;
        }

        .cue-card {
            background: linear-gradient(135deg, var(--sage-soft) 0%, #D8EBE0 100%);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 16px;
        }

        .cue-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .cue-icon {
            width: 32px;
            height: 32px;
            background: var(--sage);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .cue-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--sage);
        }

        .cue-text {
            font-size: 15px;
            line-height: 1.5;
            color: var(--text);
        }
        .cue-text strong { color: var(--sage); }

        .info-row {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .info-pill {
            flex: 1;
            background: var(--surface);
            border-radius: var(--radius-sm);
            padding: 14px;
            box-shadow: var(--shadow-soft);
        }

        .pill-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .pill-value {
            font-size: 13px;
            font-weight: 500;
            color: var(--text);
        }

        .preclimb-footer {
            padding: 16px 20px;
            padding-bottom: max(16px, env(safe-area-inset-bottom));
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }

        .finish-btn {
            flex: 1;
            padding: 18px;
            background: linear-gradient(135deg, var(--sage) 0%, #5E8A72 100%);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-family: var(--sans);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(123, 163, 143, 0.35);
        }
        .finish-btn:active { transform: scale(0.98); }

        .rest-btn {
            padding: 18px 24px;
            background: var(--surface);
            color: var(--text);
            border: 2px solid var(--sage);
            border-radius: var(--radius);
            font-family: var(--sans);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        .rest-btn:active { background: var(--sage-soft); }

        .rest-header {
            background: linear-gradient(135deg, var(--sage-soft) 0%, #D8EBE0 100%);
            padding: 16px 20px;
            padding-top: max(16px, env(safe-area-inset-top));
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .rest-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rest-dot {
            width: 10px;
            height: 10px;
            background: var(--sage);
            border-radius: 50%;
            animation: pulse 2s ease infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .rest-label {
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--sage);
        }

        .rest-timer {
            font-size: 22px;
            font-weight: 700;
            color: var(--sage);
        }

        .rest-scroll {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .rest-visual {
            background: linear-gradient(135deg, #f0ede8 0%, #e5e0d8 100%);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .rest-visual img {
            max-width: 100%;
            max-height: 220px;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
        }

        .image-credit {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 8px;
            text-align: center;
        }

        .rest-details { padding: 20px; }

        .rest-title {
            font-family: var(--serif);
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .rest-latin {
            font-family: var(--serif);
            font-style: italic;
            color: var(--text-muted);
            font-size: 13px;
            margin-bottom: 20px;
        }

        .detail-section { margin-bottom: 16px; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .section-icon { font-size: 14px; }

        .section-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            font-weight: 700;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .detail-card {
            background: var(--surface);
            border-radius: var(--radius-sm);
            padding: 14px;
            box-shadow: var(--shadow-soft);
        }
        .detail-card.full { grid-column: 1 / -1; }

        .detail-label {
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 13px;
            color: var(--text);
            line-height: 1.45;
        }

        .nerve-card {
            background: linear-gradient(135deg, var(--gold-soft) 0%, #FCF3D9 100%);
            border-radius: var(--radius-sm);
            padding: 14px;
            box-shadow: var(--shadow-soft);
        }
        .nerve-card .detail-label { color: var(--gold); }

        .artery-card {
            background: linear-gradient(135deg, #FDE8E8 0%, #FCDCDC 100%);
            border-radius: var(--radius-sm);
            padding: 14px;
            box-shadow: var(--shadow-soft);
        }
        .artery-card .detail-label { color: #C53030; }

        .highlight-card {
            background: linear-gradient(135deg, var(--coral-soft) 0%, #FCE4DF 100%);
            border-radius: var(--radius-sm);
            padding: 16px;
        }
        .highlight-card .detail-label { color: var(--coral); }

        .clinical-card {
            background: linear-gradient(135deg, var(--sky-soft) 0%, #D6E8F2 100%);
            border-radius: var(--radius-sm);
            padding: 16px;
        }
        .clinical-card .detail-label { color: var(--sky); }

        .rest-footer {
            padding: 16px 20px;
            padding-bottom: max(16px, env(safe-area-inset-bottom));
            flex-shrink: 0;
        }

        .next-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--coral) 0%, #D4765F 100%);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-family: var(--sans);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(232, 146, 124, 0.35);
        }
        .next-btn:active { transform: scale(0.98); }
    </style>
</head>
<body>
    <div class="app">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>

        <!-- Home -->
        <div class="view active" id="view-home">
            <header class="header">
                <div class="logo">Crag<span>Anatomy</span></div>
                <div class="session-pill">üßó <strong id="climb-count">0</strong></div>
            </header>
            <div class="home-content">
                <div class="hero-section">
                    <div class="hero-icon"><img src="https://media.istockphoto.com/id/485407337/photo/human-anatomy-model.jpg?s=612x612&w=0&k=20&c=xDE9nXiNdsniWdtcqHX9yErSUcfBgTMIjX-kODOFiMw=" alt="Anatomy"></div>
                    <h1 class="hero-title">Ready to Climb?</h1>
                    <p class="hero-subtitle">Learn climbing anatomy during rest periods.</p>
                </div>
                <button class="climb-btn" onclick="app.startClimb()">Start Climb ‚Üí</button>
                <div class="next-card">
                    <div class="next-label">Focus</div>
                    <div class="next-muscle" id="next-muscle">Loading...</div>
                    <div class="next-region" id="next-region"></div>
                </div>
            </div>
        </div>

        <!-- Pre-Climb -->
        <div class="view" id="view-preclimb">
            <div class="preclimb-header">
                <button class="back-btn" onclick="app.goHome()">‚Üê</button>
                <div class="preclimb-title-bar">
                    <h1 id="preclimb-title"></h1>
                    <p id="preclimb-latin"></p>
                </div>
            </div>
            <div class="preclimb-scroll">
                <div class="anatomy-visual"><img id="preclimb-image" src="" alt="Anatomy"></div>
                <div class="cue-card">
                    <div class="cue-header">
                        <div class="cue-icon">üí°</div>
                        <span class="cue-label">While You Climb</span>
                    </div>
                    <p class="cue-text" id="preclimb-cue"></p>
                </div>
                <div class="info-row">
                    <div class="info-pill">
                        <div class="pill-label">Action</div>
                        <div class="pill-value" id="preclimb-action"></div>
                    </div>
                    <div class="info-pill">
                        <div class="pill-label">Region</div>
                        <div class="pill-value" id="preclimb-region"></div>
                    </div>
                </div>
            </div>
            <div class="preclimb-footer">
                <button class="rest-btn" onclick="app.skipToRest()">Rest</button>
                <button class="finish-btn" onclick="app.finishClimb()">‚úì Done</button>
            </div>
        </div>

        <!-- Rest -->
        <div class="view" id="view-rest">
            <div class="rest-header">
                <div class="rest-status">
                    <div class="rest-dot"></div>
                    <span class="rest-label">Rest & Learn</span>
                </div>
                <div class="rest-timer" id="rest-timer">0:00</div>
            </div>
            <div class="rest-scroll">
                <div class="rest-visual">
                    <img id="rest-image" src="" alt="Anatomy">
                    <div class="image-credit" id="image-credit"></div>
                </div>
                <div class="rest-details">
                    <h2 class="rest-title" id="rest-title"></h2>
                    <p class="rest-latin" id="rest-latin"></p>
                    
                    <div class="detail-section">
                        <div class="section-header">
                            <span class="section-icon">üìç</span>
                            <span class="section-title">Attachments</span>
                        </div>
                        <div class="detail-grid">
                            <div class="detail-card">
                                <div class="detail-label">Origin</div>
                                <div class="detail-value" id="rest-origin"></div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-label">Insertion</div>
                                <div class="detail-value" id="rest-insertion"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <div class="section-header">
                            <span class="section-icon">‚ö°</span>
                            <span class="section-title">Neurovascular</span>
                        </div>
                        <div class="detail-grid">
                            <div class="nerve-card">
                                <div class="detail-label">Nerve</div>
                                <div class="detail-value" id="rest-nerve"></div>
                            </div>
                            <div class="artery-card">
                                <div class="detail-label">Artery</div>
                                <div class="detail-value" id="rest-artery"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <div class="section-header">
                            <span class="section-icon">üéØ</span>
                            <span class="section-title">Function</span>
                        </div>
                        <div class="detail-card full">
                            <div class="detail-label">Actions</div>
                            <div class="detail-value" id="rest-actions"></div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <div class="section-header">
                            <span class="section-icon">üßó</span>
                            <span class="section-title">Climbing</span>
                        </div>
                        <div class="highlight-card">
                            <div class="detail-label">Why Climbers Care</div>
                            <div class="detail-value" id="rest-climbing"></div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <div class="section-header">
                            <span class="section-icon">üè•</span>
                            <span class="section-title">Clinical Pearl</span>
                        </div>
                        <div class="clinical-card">
                            <div class="detail-label">Medical Note</div>
                            <div class="detail-value" id="rest-clinical"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="rest-footer">
                <button class="next-btn" onclick="app.nextClimb()">üßó Next Climb</button>
            </div>
        </div>
    </div>

    <script>
    // Comprehensive Anatomy Database from Climber's Study Guide
    // Real images from TeachMeAnatomy (verified working)
    const IMAGES = {
        forearm: 'https://teachmeanatomy.info/wp-content/uploads/Deep-Flexor-Muscles-of-the-Anterior-Forearm-1024x355.png',
        forearm_superficial: 'https://teachmeanatomy.info/wp-content/uploads/Superficial-Flexor-Muscles-of-the-Anterior-Forearm.png',
        back: 'https://teachmeanatomy.info/wp-content/uploads/Superficial-Muscles-of-the-Back-857x1024.jpg',
        arm: 'https://teachmeanatomy.info/wp-content/uploads/Coracobrachialis-Biceps-and-Brachialis-Muscles.jpg',
        triceps: 'https://teachmeanatomy.info/wp-content/uploads/Long-and-Lateral-Heads-of-the-Triceps-Brachii.jpg',
        shoulder: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Arm_muscles_front_deep.png/300px-Arm_muscles_front_deep.png',
        hand: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Hand_dissection_1.jpg/300px-Hand_dissection_1.jpg'
    };

    const ANATOMY_DB = [
        // === THE BACK ===
        {
            id: 'lat',
            name: 'Latissimus Dorsi',
            latin: 'Musculus latissimus dorsi',
            region: 'Back',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Spinous processes T7‚ÄìT12, thoracolumbar fascia, iliac crest, inferior 3‚Äì4 ribs, inferior angle of scapula',
            insertion: 'Floor of the intertubercular (bicipital) groove of the humerus',
            nerve: 'Thoracodorsal nerve (C6, C7, C8) ‚Äî posterior cord',
            artery: 'Thoracodorsal artery (branch of subscapular)',
            actions: 'Extension, adduction, and medial rotation of shoulder; assists forced expiration',
            climbingCue: 'Pay attention to <strong>lat engagement on every pull-down</strong>. Feel the connection from hands to hips. When your mid-back fatigues, that\'s your lat approaching failure.',
            climbingDetail: 'The primary pulling muscle. Every pull-down is powered by lats. Dominant on steep overhangs. Proximally connects to erector spinae and contralateral gluteus maximus (posterior oblique sling).',
            clinical: 'Thoracodorsal nerve at risk during axillary lymph node dissection. Damage ‚Üí weakness pushing on armrests to stand. Also used as muscle flap in breast reconstruction.'
        },
        {
            id: 'trapezius',
            name: 'Trapezius',
            latin: 'Musculus trapezius',
            region: 'Back',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Medial 1/3 superior nuchal line, EOP, ligamentum nuchae, spinous processes C7‚ÄìT12',
            insertion: 'Lateral 1/3 clavicle, acromion, spine of scapula',
            nerve: 'Motor: Spinal accessory (CN XI). Proprioception: C3, C4',
            artery: 'Transverse cervical artery (thyrocervical trunk)',
            actions: 'Upper: elevate scapula. Middle: retract. Lower: depress. All: upward rotation of glenoid.',
            climbingCue: 'Pay attention to <strong>trap fibers during different moves</strong>. Upper fibers shrug during top-outs. Lower fibers keep shoulders packed during dead-hangs. Middle fibers retract during lock-offs.',
            climbingDetail: 'Stabilizes scapula throughout every climbing movement. Upper fibers often overactive ‚Äî focus on engaging lower fibers.',
            clinical: 'CN XI is superficial in posterior triangle ‚Äî vulnerable during lymph node biopsy. Damage ‚Üí cannot shrug, difficulty abducting past 90¬∞.'
        },
        {
            id: 'rhomboids',
            name: 'Rhomboid Major & Minor',
            latin: 'Musculi rhomboidei',
            region: 'Back',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Minor: ligamentum nuchae, C7‚ÄìT1. Major: T2‚ÄìT5 spinous processes',
            insertion: 'Medial border of scapula',
            nerve: 'Dorsal scapular nerve (C5) ‚Äî pierces middle scalene',
            artery: 'Dorsal scapular artery',
            actions: 'Retract scapula, inferior rotation of glenoid, stabilize scapula to thoracic wall',
            climbingCue: 'Pay attention to <strong>rhomboids when squeezing shoulder blades together</strong> at the bottom of a pull. Essential for lock-off scapular stability.',
            climbingDetail: 'Fire when you squeeze shoulder blades together. Engage most during slow, controlled descents. Oppose serratus anterior (retraction vs protraction).',
            clinical: 'Dorsal scapular nerve pierces middle scalene ‚Äî entrapment mimics cervical radiculopathy. Causes medial winging (distinct from lateral winging).'
        },
        {
            id: 'serratus',
            name: 'Serratus Anterior',
            latin: 'Musculus serratus anterior',
            region: 'Thorax',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'External surfaces of ribs 1‚Äì8, via fleshy digitations',
            insertion: 'Costal surface of medial border and inferior angle of scapula',
            nerve: 'Long thoracic nerve (C5, C6, C7) ‚Äî descends superficially on muscle',
            artery: 'Lateral thoracic artery, thoracodorsal artery',
            actions: 'Protraction of scapula, upward rotation of glenoid, holds scapula to chest wall',
            climbingCue: 'Pay attention to <strong>serratus when reaching far or mantling</strong>. Feel the lateral rib activation. The "boxer\'s muscle." Without it, scapula would wing off chest wall.',
            climbingDetail: 'Fires every time you reach for a distant hold or push upward. Lower digitations interdigitate with external oblique. Forms force couple with trapezius for upward rotation.',
            clinical: 'Long thoracic nerve runs superficially ‚Äî vulnerable during mastectomy, chest tube insertion. Damage ‚Üí classic winged scapula. High-yield board question.'
        },
        {
            id: 'levator',
            name: 'Levator Scapulae',
            latin: 'Musculus levator scapulae',
            region: 'Neck/Back',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Transverse processes C1‚ÄìC4 (posterior tubercles)',
            insertion: 'Superior angle and medial border of scapula (above spine)',
            nerve: 'Dorsal scapular nerve (C5) and direct branches C3, C4',
            artery: 'Dorsal scapular artery, ascending cervical',
            actions: 'Elevation of scapula, inferior rotation of glenoid, lateral flexion of cervical spine',
            climbingCue: 'Pay attention to <strong>levator scapulae tension during reaching</strong>. Often becomes tight in climbers who carry neck tension. Common source of post-climbing stiffness.',
            climbingDetail: 'Stabilizes superior angle during pulling. Works with upper trapezius and rhomboids to elevate scapula.',
            clinical: 'Common source of neck/upper shoulder pain and tension headaches. Develops myofascial trigger points at insertion. Shares dorsal scapular nerve with rhomboids.'
        },
        // === SHOULDER & ROTATOR CUFF ===
        {
            id: 'supraspinatus',
            name: 'Supraspinatus',
            latin: 'Musculus supraspinatus',
            region: 'Shoulder (Rotator Cuff)',
            image: IMAGES.shoulder,
            credit: 'Wikimedia Commons',
            origin: 'Supraspinous fossa of scapula',
            insertion: 'Superior facet of greater tubercle; blends with superior capsule',
            nerve: 'Suprascapular nerve (C5, C6) ‚Äî through suprascapular notch',
            artery: 'Suprascapular artery ‚Äî passes OVER the ligament',
            actions: 'Initiates abduction (first 0‚Äì15¬∞), stabilizes humeral head in glenoid',
            climbingCue: 'Pay attention to <strong>supraspinatus when initiating any reach</strong>. Centers the humeral head during pulling and reaching. Most commonly injured rotator cuff muscle in climbers.',
            climbingDetail: 'Works constantly to center humeral head. Shares suprascapular nerve with infraspinatus. Critical zone ~1cm proximal to insertion has watershed hypovascularity.',
            clinical: 'Most commonly torn rotator cuff tendon. Empty can test (Jobe): arm 90¬∞ abduction, 30¬∞ forward, thumb down, resist downward pressure.'
        },
        {
            id: 'infraspinatus',
            name: 'Infraspinatus',
            latin: 'Musculus infraspinatus',
            region: 'Shoulder (Rotator Cuff)',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Infraspinous fossa of scapula',
            insertion: 'Middle facet of greater tubercle of humerus',
            nerve: 'Suprascapular nerve (C5, C6) ‚Äî after spinoglenoid notch',
            artery: 'Suprascapular and circumflex scapular arteries',
            actions: 'Lateral (external) rotation of shoulder, posterior stabilization of humeral head',
            climbingCue: 'Pay attention to <strong>infraspinatus during gastons</strong>. External rotation engages it. Essential for decelerating dynamic moves. Key stabilizer preventing anterior dislocation.',
            climbingDetail: 'Fires during gastons. Works as force couple with subscapularis ‚Äî centering humeral head in glenoid.',
            clinical: 'Ganglion cyst at spinoglenoid notch selectively denervates infraspinatus, sparing supraspinatus. Presents as isolated lateral rotation weakness.'
        },
        {
            id: 'subscapularis',
            name: 'Subscapularis',
            latin: 'Musculus subscapularis',
            region: 'Shoulder (Rotator Cuff)',
            image: IMAGES.shoulder,
            credit: 'Wikimedia Commons',
            origin: 'Subscapular fossa (entire anterior surface of scapula)',
            insertion: 'Lesser tubercle of humerus and transverse humeral ligament',
            nerve: 'Upper and lower subscapular nerves (C5, C6, C7)',
            artery: 'Subscapular artery (largest branch of 3rd part axillary)',
            actions: 'Medial (internal) rotation, adduction, anterior stabilization of humeral head',
            climbingCue: 'Pay attention to <strong>subscapularis during cross-body moves and arm locks</strong>. Largest rotator cuff muscle. Powers internal rotation and prevents anterior humeral translation.',
            climbingDetail: 'Largest and strongest rotator cuff muscle. ONLY rotator cuff on lesser tubercle. Transverse humeral ligament holds long head biceps in groove.',
            clinical: 'Lift-off test (Gerber): hand behind back, lift off. Belly press test: press hand against abdomen. Only rotator cuff on lesser tubercle.'
        },
        {
            id: 'deltoid',
            name: 'Deltoid',
            latin: 'Musculus deltoideus',
            region: 'Shoulder',
            image: IMAGES.shoulder,
            credit: 'Wikimedia Commons',
            origin: 'Anterior: lateral 1/3 clavicle. Middle: acromion. Posterior: scapular spine.',
            insertion: 'Deltoid tuberosity on lateral humeral shaft',
            nerve: 'Axillary nerve (C5, C6) ‚Äî through quadrilateral space',
            artery: 'Posterior circumflex humeral, thoracoacromial (deltoid branch)',
            actions: 'Anterior: flexion/medial rotation. Middle: abduction 15‚Äì90¬∞. Posterior: extension/lateral rotation.',
            climbingCue: 'Pay attention to <strong>deltoid during top-outs and gastons</strong>. Middle deltoid powers upward push. Posterior for gastons. Anterior for front-reaching.',
            climbingDetail: 'Primary mover for abduction past 15¬∞. Origin mirrors trapezius insertion ‚Äî continuous superficial sheet. Forms force couple with supraspinatus.',
            clinical: 'Surgical neck fractures or anterior dislocations ‚Üí axillary nerve injury ‚Üí deltoid paralysis + "regimental badge" anesthesia. Always test sensation before reducing dislocations.'
        },
        {
            id: 'teres_minor',
            name: 'Teres Minor',
            latin: 'Musculus teres minor',
            region: 'Shoulder (Rotator Cuff)',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Upper 2/3 of lateral border of scapula (posterior surface)',
            insertion: 'Inferior facet of greater tubercle of humerus; blends with posterior capsule',
            nerve: 'Axillary nerve (C5, C6) ‚Äî branch given off in quadrilateral space',
            artery: 'Circumflex scapular artery, posterior circumflex humeral artery',
            actions: 'Lateral (external) rotation of shoulder, weak adduction, posterior stabilization of humeral head',
            climbingCue: 'Pay attention to <strong>teres minor during gastons and external rotation moves</strong>. Works with infraspinatus to externally rotate. Helps decelerate internal rotation during dynamic catches.',
            climbingDetail: 'Shares external rotation duty with infraspinatus. Part of quadrilateral space boundary (with teres major, triceps long head, humerus). Smaller but important stabilizer.',
            clinical: 'Usually spared in rotator cuff tears (supraspinatus tears first). Quadrilateral space syndrome: axillary nerve compression ‚Üí teres minor weakness + deltoid involvement + lateral shoulder numbness.'
        },
        {
            id: 'teres_major',
            name: 'Teres Major',
            latin: 'Musculus teres major',
            region: 'Shoulder',
            image: IMAGES.back,
            credit: 'TeachMeAnatomy',
            origin: 'Posterior surface of inferior angle of scapula, lower 1/3 lateral border',
            insertion: 'Medial lip of intertubercular groove (with latissimus dorsi)',
            nerve: 'Lower subscapular nerve (C5, C6, C7) ‚Äî posterior cord',
            artery: 'Circumflex scapular artery, thoracodorsal artery',
            actions: 'Medial rotation, adduction, and extension of shoulder ‚Äî "lat\'s little helper"',
            climbingCue: 'Pay attention to <strong>teres major during pull-downs and lock-offs</strong>. Works synergistically with lat. Feel it in the lower scapular region during powerful adduction.',
            climbingDetail: 'Called "lat\'s little helper" ‚Äî same actions, same insertion (medial lip of groove). NOT a rotator cuff muscle despite the name similarity to teres minor. Forms boundary of triangular and quadrilateral spaces.',
            clinical: 'Rarely injured in isolation. Forms posterior axillary fold with lat. Triangular space (teres major, teres minor, long head triceps) transmits circumflex scapular artery.'
        },
        // === THE ARM ===
        {
            id: 'biceps',
            name: 'Biceps Brachii',
            latin: 'Musculus biceps brachii',
            region: 'Arm (Anterior)',
            image: IMAGES.arm,
            credit: 'TeachMeAnatomy',
            origin: 'Long head: supraglenoid tubercle (intracapsular). Short head: coracoid process.',
            insertion: 'Radial tuberosity + bicipital aponeurosis into forearm fascia',
            nerve: 'Musculocutaneous nerve (C5, C6)',
            artery: 'Brachial artery (muscular branches)',
            actions: 'Supination (most powerful when elbow 90¬∞), elbow flexion, weak shoulder flexion',
            climbingCue: 'Pay attention to <strong>biceps on sidepulls and underlings</strong>. Stronger supinator than flexor ‚Äî feel it engage twisting. Long head can develop impingement.',
            climbingDetail: 'Fires with every lock-off. Long head is intracapsular but extrasynovial ‚Äî secondary humeral head depressor. Aponeurosis protects brachial artery + median nerve.',
            clinical: 'Bicipital aponeurosis protects structures in cubital fossa. Long head rupture ‚Üí "Popeye deformity." Speed\'s test: resisted forward flexion with extended elbow.'
        },
        {
            id: 'brachialis',
            name: 'Brachialis',
            latin: 'Musculus brachialis',
            region: 'Arm (Anterior)',
            image: IMAGES.arm,
            credit: 'TeachMeAnatomy',
            origin: 'Distal half of anterior humeral surface, intermuscular septa',
            insertion: 'Coronoid process and tuberosity of ulna',
            nerve: 'Musculocutaneous (C5, C6) primary; lateral portion also radial nerve (C7)',
            artery: 'Brachial artery, radial recurrent artery',
            actions: 'Elbow flexion ‚Äî primary flexor regardless of forearm position',
            climbingCue: 'Pay attention to <strong>brachialis during lock-offs</strong>. True workhorse of elbow flexion. Works equally in pronation, supination, or neutral. Feel the deep anterior arm burn.',
            climbingDetail: 'More important than biceps! Inserts on ulna (doesn\'t rotate), so force independent of forearm position. Forms floor of cubital fossa. Dual nerve supply ensures flexion preserved.',
            clinical: 'Strongest pure elbow flexor. Dual innervation ensures redundancy. Musculocutaneous continues as lateral cutaneous nerve of forearm.'
        },
        {
            id: 'triceps',
            name: 'Triceps Brachii',
            latin: 'Musculus triceps brachii',
            region: 'Arm (Posterior)',
            image: IMAGES.triceps,
            credit: 'TeachMeAnatomy',
            origin: 'Long head: infraglenoid tubercle. Lateral head: above radial groove. Medial head: below radial groove.',
            insertion: 'Olecranon process of ulna',
            nerve: 'Radial nerve (C6, C7, C8) ‚Äî each head gets own branch',
            artery: 'Deep brachial (profunda brachii) ‚Äî travels with radial nerve in groove',
            actions: 'Elbow extension (all heads). Long head: shoulder extension and adduction.',
            climbingCue: 'Pay attention to <strong>triceps during mantling and pressing</strong>. Powers top-outs. Decelerates elbow flexion eccentrically. Long head assists lats in shoulder extension.',
            climbingDetail: 'Long head passes between teres major and minor creating quadrilateral space boundaries. Olecranon bursa overlies insertion ("student\'s elbow").',
            clinical: 'Radial nerve + profunda brachii in radial groove. Midshaft humeral fracture ‚Üí wrist drop, loss of brachioradialis reflex, sensory loss in snuffbox. Triceps usually spared.'
        },
        {
            id: 'coracobrachialis',
            name: 'Coracobrachialis',
            latin: 'Musculus coracobrachialis',
            region: 'Arm (Anterior)',
            image: IMAGES.arm,
            credit: 'TeachMeAnatomy',
            origin: 'Apex of coracoid process of scapula (with short head biceps)',
            insertion: 'Middle 1/3 of medial humeral surface (between triceps and brachialis insertions)',
            nerve: 'Musculocutaneous nerve (C5, C6, C7) ‚Äî pierces the muscle belly',
            artery: 'Brachial artery (muscular branches)',
            actions: 'Flexion and adduction of shoulder, weak stabilization of humeral head',
            climbingCue: 'Pay attention to <strong>coracobrachialis when reaching forward and across</strong>. Helps pull arm toward body. Works during compression moves and cross-body reaching.',
            climbingDetail: 'Key landmark: musculocutaneous nerve pierces it ~5-8cm below coracoid. Short head biceps and coracobrachialis form conjoint tendon. Assists in pulling arm across body for cross-through moves.',
            clinical: 'Musculocutaneous nerve pierces the muscle ‚Äî entrapment causes anterior arm weakness and lateral forearm numbness. Conjoint tendon avulsion rare but causes significant weakness.'
        },
        // === FOREARM ===
        {
            id: 'fdp',
            name: 'Flexor Digitorum Profundus',
            latin: 'Musculus FDP',
            region: 'Forearm (Deep)',
            image: IMAGES.forearm,
            credit: 'TeachMeAnatomy',
            origin: 'Proximal 3/4 anterior ulna, interosseous membrane',
            insertion: 'Bases of distal phalanges digits 2‚Äì5',
            nerve: 'Lateral (2,3): anterior interosseous nerve. Medial (4,5): ulnar nerve (C8, T1).',
            artery: 'Anterior interosseous artery, ulnar artery',
            actions: 'Flexion of DIP joints ‚Äî ONLY muscle that flexes DIP. Also assists PIP, MCP, wrist.',
            climbingCue: 'Pay attention to <strong>FDP when crimping</strong>. The final fingertip curl. Feel the deep forearm burn. Tendons give rise to lumbricals. Lumbrical shift injury is climbing-specific.',
            climbingDetail: 'Only muscle that flexes DIP ‚Äî the crimp engine. Only forearm flexor originating entirely from ulna. Passes through FDS split (chiasm of Camper).',
            clinical: 'Anterior interosseous syndrome (Kiloh-Nevin): AIN is pure motor, no sensory loss. Cannot make "OK" sign. Split innervation reflects embryological boundary.'
        },
        {
            id: 'fds',
            name: 'Flexor Digitorum Superficialis',
            latin: 'Musculus FDS',
            region: 'Forearm (Intermediate)',
            image: IMAGES.forearm_superficial,
            credit: 'TeachMeAnatomy',
            origin: 'Humeroulnar head: medial epicondyle + coronoid. Radial head: superior anterior radius.',
            insertion: 'Sides of middle phalanges digits 2‚Äì5. Splits (chiasm of Camper) to let FDP through.',
            nerve: 'Median nerve (C7, C8, T1)',
            artery: 'Ulnar artery, anterior interosseous artery',
            actions: 'Flexion of PIP joints digits 2‚Äì5. Assists MCP and wrist flexion.',
            climbingCue: 'Pay attention to <strong>FDS on slopers and open-hand grips</strong>. Flexes PIP. Test in isolation: hold other fingers extended, flex one PIP.',
            climbingDetail: 'Crucial for open-hand grips. Median nerve and ulnar artery pass deep to FDS arch entering forearm.',
            clinical: 'FDS splits for FDP (chiasm of Camper). Test: hold all others extended, flex PIP. FDS to 5th digit absent/weak in ~20%.'
        },
        {
            id: 'pronator_teres',
            name: 'Pronator Teres',
            latin: 'Musculus pronator teres',
            region: 'Forearm (Superficial)',
            image: IMAGES.forearm_superficial,
            credit: 'TeachMeAnatomy',
            origin: 'Humeral head: medial epicondyle (common flexor origin). Ulnar head: coronoid process.',
            insertion: 'Middle of lateral surface of radius (pronator tuberosity)',
            nerve: 'Median nerve (C6, C7) ‚Äî passes between the two heads',
            artery: 'Ulnar artery, anterior ulnar recurrent artery',
            actions: 'Pronation of forearm, weak elbow flexion',
            climbingCue: 'Pay attention to <strong>pronator teres when turning palms down on slopers</strong>. Controls forearm rotation. Median nerve passes between its two heads ‚Äî overuse can cause compression.',
            climbingDetail: 'Forms medial boundary of cubital fossa. Median nerve passes between humeral and ulnar heads. Works with pronator quadratus for full pronation. Important for sloper orientation.',
            clinical: 'Pronator syndrome: median nerve compression between the two heads. Presents like carpal tunnel but with forearm pain and weakness of thenar muscles. Resisted pronation reproduces symptoms.'
        },
        {
            id: 'fpl',
            name: 'Flexor Pollicis Longus',
            latin: 'Musculus flexor pollicis longus',
            region: 'Forearm (Deep)',
            image: IMAGES.forearm,
            credit: 'TeachMeAnatomy',
            origin: 'Anterior surface of radius (middle 1/3), adjacent interosseous membrane',
            insertion: 'Base of distal phalanx of thumb (palmar surface)',
            nerve: 'Anterior interosseous nerve (C8, T1) ‚Äî branch of median nerve',
            artery: 'Anterior interosseous artery',
            actions: 'Flexion of IP joint of thumb ‚Äî ONLY muscle that flexes thumb IP. Assists MCP and CMC flexion.',
            climbingCue: 'Pay attention to <strong>FPL when crimping with thumb wrap</strong>. Powers the thumb curl over index finger in full crimp. Only muscle flexing thumb IP joint.',
            climbingDetail: 'Unique to humans ‚Äî enables precision grip. Tendon passes through carpal tunnel in its own synovial sheath. Works with thenar muscles for powerful pinch grip. Critical for thumb-over crimp.',
            clinical: 'Anterior interosseous syndrome: cannot make "OK" sign (FPL + FDP to index affected). Linburg-Comstock syndrome: anomalous connection between FPL and FDP causing linked thumb-index movement.'
        },
        {
            id: 'brachioradialis',
            name: 'Brachioradialis',
            latin: 'Musculus brachioradialis',
            region: 'Forearm (Lateral)',
            image: IMAGES.forearm_superficial,
            credit: 'TeachMeAnatomy',
            origin: 'Proximal 2/3 of lateral supracondylar ridge of humerus',
            insertion: 'Lateral surface of distal radius, just proximal to styloid process',
            nerve: 'Radial nerve (C5, C6) ‚Äî before it divides into superficial and deep branches',
            artery: 'Radial recurrent artery',
            actions: 'Elbow flexion (especially in neutral/mid-pronated position), returns forearm to neutral from full pronation or supination',
            climbingCue: 'Pay attention to <strong>brachioradialis during neutral-grip lock-offs</strong>. Works hardest when forearm is mid-pronated. Feel the lateral forearm bulk during elbow flexion.',
            climbingDetail: 'Flexor innervated by radial nerve (posterior cord) ‚Äî an embryological oddity. Most effective with forearm in neutral. Forms lateral boundary of cubital fossa. Prominent in climbers.',
            clinical: 'Brachioradialis reflex tests C5-C6 and radial nerve. Radial nerve courses between brachioradialis and brachialis in forearm. Reflex absent in radial nerve or C6 lesions.'
        },
        {
            id: 'extensors',
            name: 'Wrist & Finger Extensors',
            latin: 'ECRL, ECRB, ECU, ED, EDM',
            region: 'Forearm (Posterior)',
            image: IMAGES.forearm,
            credit: 'TeachMeAnatomy',
            origin: 'Lateral epicondyle (common extensor origin) and posterior forearm',
            insertion: 'ECRL/ECRB: 2nd/3rd MC bases. ECU: 5th MC base. ED: extensor expansions 2-5. EDM: 5th digit expansion.',
            nerve: 'Posterior interosseous nerve (C7, C8) ‚Äî deep branch of radial nerve',
            artery: 'Posterior interosseous artery',
            actions: 'Extension of wrist (ECRL, ECRB, ECU), extension of MCP joints digits 2-5 (ED, EDM), finger abduction via extensor expansion',
            climbingCue: 'Pay attention to <strong>extensors when opening hand and setting up for grips</strong>. Balance the powerful flexors. ECRB tendinopathy = lateral epicondylitis ("tennis elbow") common in climbers.',
            climbingDetail: 'ED tendons connect via juncturae tendinum ‚Äî can limit independent extension. Extensor expansion receives interossei and lumbricals. Extensors fatigue differently than flexors.',
            clinical: 'Lateral epicondylitis (tennis elbow): ECRB origin pain, worse with resisted wrist extension. Posterior interosseous syndrome: finger drop without wrist drop (ECRL spared). Saturday night palsy spares extensors proximal to spiral groove.'
        },
        // === HAND ===
        {
            id: 'lumbricals',
            name: 'Lumbricals',
            latin: 'Musculi lumbricales',
            region: 'Hand (Intrinsic)',
            image: IMAGES.hand,
            credit: 'Wikimedia Commons',
            origin: '1st/2nd: radial side FDP tendons 2,3 (unipennate). 3rd/4th: adjacent FDP tendons (bipennate).',
            insertion: 'Lateral (radial) side of extensor expansion digits 2‚Äì5',
            nerve: '1st/2nd: median nerve. 3rd/4th: deep ulnar nerve (C8, T1).',
            artery: 'Common and proper palmar digital arteries',
            actions: 'Flex MCP + extend PIP and DIP simultaneously ‚Äî the unique "lumbrical position."',
            climbingCue: 'Pay attention to <strong>lumbricals on slopers and half-crimp</strong>. Enable open-hand grip: MCP flexion + IP extension maximizes contact area.',
            climbingDetail: 'Unique: arise from tendons, insert into tendons ‚Äî no bony attachment. Only muscles simultaneously flexing MCP and extending IP. Split innervation mirrors FDP.',
            clinical: 'Lumbrical shift injury: differential FDP loading pulls lumbrical into carpal tunnel. In median nerve palsy, loss contributes to "hand of benediction."'
        },
        {
            id: 'interossei',
            name: 'Dorsal & Palmar Interossei',
            latin: 'Musculi interossei',
            region: 'Hand (Intrinsic)',
            image: IMAGES.hand,
            credit: 'Wikimedia Commons',
            origin: 'Dorsal (4): adjacent sides of two MCs (bipennate). Palmar (3-4): single MC (unipennate).',
            insertion: 'Proximal phalanx bases and lateral bands of extensor expansions',
            nerve: 'Deep branch of ulnar nerve (C8, T1) ‚Äî ALL interossei',
            artery: 'Deep palmar arch, metacarpal arteries',
            actions: 'Dorsal: ABduction (DAB). Palmar: ADduction (PAD). Both flex MCP, extend IP via expansion.',
            climbingCue: 'Pay attention to <strong>interossei for finger spread and squeeze</strong>. DAB = spread for wide holds. PAD = squeeze for cracks/pockets. MCP flex + IP extend crucial for slopers.',
            climbingDetail: 'First dorsal interosseous most clinically tested (first web space). Fill spaces between metacarpals deep to flexor tendons.',
            clinical: 'Low ulnar lesion ‚Üí claw hand (4th/5th hyperextend MCP, flex IP). Ulnar paradox: HIGH lesion = LESS clawing (FDP also lost). Froment\'s sign for adductor pollicis.'
        },
        {
            id: 'pulleys',
            name: 'Flexor Pulley System (A2/A4)',
            latin: 'Vagina fibrosa digitorum manus',
            region: 'Hand (Finger)',
            image: IMAGES.hand,
            credit: 'Wikimedia Commons',
            origin: 'A1: MCP volar plate. A2: proximal phalanx. A3: PIP. A4: middle phalanx. A5: DIP.',
            insertion: 'N/A ‚Äî fibrous sheaths constraining flexor tendons to phalanges',
            nerve: 'N/A (non-contractile connective tissue). Vinculae carry blood vessels to tendons.',
            artery: 'Digital arteries supply vinculae which vascularize tendons within sheath',
            actions: 'Prevent bowstringing ‚Äî hold tendons close to bone for efficient force conversion',
            climbingCue: 'Pay attention to <strong>pulley stress when full crimping</strong>. A2 and A4 are biomechanically critical. Consider half-crimp or open-hand to reduce strain. Pop = rupture.',
            climbingDetail: 'THE most clinically relevant structure for climbing injuries. A2 ruptures from aggressive crimping ‚Äî "pop" followed by swelling, possible visible bowstringing.',
            clinical: 'A2 + A4 most important biomechanically. Combined rupture may need surgery. A1 pathology ‚Üí trigger finger. Flexor tenosynovitis: Kanavel signs = surgical emergency.'
        },
        {
            id: 'thenar',
            name: 'Thenar Muscles',
            latin: 'Opponens pollicis, APB, FPB',
            region: 'Hand (Thenar)',
            image: IMAGES.hand,
            credit: 'Wikimedia Commons',
            origin: 'Flexor retinaculum, trapezium, scaphoid. Deep head FPB: trapezoid + capitate.',
            insertion: 'Opponens: 1st MC shaft. APB: lateral proximal phalanx. FPB: proximal phalanx base.',
            nerve: 'Recurrent branch of median nerve (C8, T1) ‚Äî "million dollar nerve." Deep head by ulnar.',
            artery: 'Superficial palmar branch of radial, princeps pollicis artery',
            actions: 'Opposition (opponens), thumb abduction (APB), thumb MCP flexion (FPB). Enable pincer grip.',
            climbingCue: 'Pay attention to <strong>thenar muscles during every pinch grip</strong>. Feel the thenar eminence contract forcefully. Opposition brings thumb pad to finger pads.',
            climbingDetail: 'Essential for every pinch grip. Recurrent branch emerges laterally from median just distal to retinaculum. Form radial wall of carpal tunnel.',
            clinical: 'Recurrent branch laceration destroys opposition ‚Äî profound disability. "Ape hand" = thenar wasting + loss of opposition. Test: touch thumb tip to 5th finger.'
        },
        {
            id: 'hypothenar',
            name: 'Hypothenar Muscles',
            latin: 'Opponens digiti minimi, ADM, FDM',
            region: 'Hand (Hypothenar)',
            image: IMAGES.hand,
            credit: 'Wikimedia Commons',
            origin: 'Flexor retinaculum, hook of hamate, pisiform bone',
            insertion: 'Opponens: 5th MC shaft. ADM: medial proximal phalanx base. FDM: proximal phalanx base of 5th digit.',
            nerve: 'Deep branch of ulnar nerve (C8, T1)',
            artery: 'Ulnar artery (deep palmar branch)',
            actions: 'Opposition of 5th digit (opponens), abduction of 5th digit (ADM), flexion of 5th MCP (FDM)',
            climbingCue: 'Pay attention to <strong>hypothenar muscles during crack climbing and side pulls</strong>. Power the pinky side of grip. Cupping the hand for jams activates these muscles.',
            climbingDetail: 'Form ulnar border of palm. Work with interossei for small hold precision. Hook of hamate is key landmark ‚Äî Guyon\'s canal runs alongside it. Active in crack climbing.',
            clinical: 'Ulnar tunnel syndrome (Guyon\'s canal): ulnar nerve compression at wrist. Cyclists palsy from handlebar pressure. Hook of hamate fractures from direct trauma ‚Äî pain with gripping.'
        }
    ];

    const app = {
        state: { currentIndex: 0, climbCount: 0, timerInterval: null, timerSeconds: 0, history: [] },

        init() {
            this.state.currentIndex = this.getRandomIndex();
            this.updateNextPreview();
        },

        getRandomIndex() {
            const available = [];
            for (let i = 0; i < ANATOMY_DB.length; i++) {
                if (!this.state.history.slice(-5).includes(i)) available.push(i);
            }
            return available.length ? available[Math.floor(Math.random() * available.length)] : Math.floor(Math.random() * ANATOMY_DB.length);
        },

        updateNextPreview() {
            const item = ANATOMY_DB[this.state.currentIndex];
            document.getElementById('next-muscle').textContent = item.name;
            document.getElementById('next-region').textContent = item.region;
        },

        showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        },

        startClimb() {
            const item = ANATOMY_DB[this.state.currentIndex];
            document.getElementById('preclimb-image').src = item.image;
            document.getElementById('preclimb-title').textContent = item.name;
            document.getElementById('preclimb-latin').textContent = item.latin;
            document.getElementById('preclimb-action').textContent = item.actions.split('.')[0];
            document.getElementById('preclimb-region').textContent = item.region;
            document.getElementById('preclimb-cue').innerHTML = item.climbingCue;
            this.showView('view-preclimb');
        },

        finishClimb() {
            this.populateRestView();
            this.startTimer();
            this.state.climbCount++;
            this.state.history.push(this.state.currentIndex);
            document.getElementById('climb-count').textContent = this.state.climbCount;
            this.showView('view-rest');
        },

        skipToRest() {
            this.populateRestView();
            this.startTimer();
            this.showView('view-rest');
        },

        populateRestView() {
            const item = ANATOMY_DB[this.state.currentIndex];
            document.getElementById('rest-image').src = item.image;
            document.getElementById('image-credit').textContent = 'Image: ' + item.credit;
            document.getElementById('rest-title').textContent = item.name;
            document.getElementById('rest-latin').textContent = item.latin;
            document.getElementById('rest-origin').textContent = item.origin;
            document.getElementById('rest-insertion').textContent = item.insertion;
            document.getElementById('rest-nerve').textContent = item.nerve;
            document.getElementById('rest-artery').textContent = item.artery;
            document.getElementById('rest-actions').textContent = item.actions;
            document.getElementById('rest-climbing').textContent = item.climbingDetail;
            document.getElementById('rest-clinical').textContent = item.clinical;
        },

        startTimer() {
            this.state.timerSeconds = 0;
            this.updateTimerDisplay();
            if (this.state.timerInterval) clearInterval(this.state.timerInterval);
            this.state.timerInterval = setInterval(() => { this.state.timerSeconds++; this.updateTimerDisplay(); }, 1000);
        },

        updateTimerDisplay() {
            const m = Math.floor(this.state.timerSeconds / 60);
            const s = this.state.timerSeconds % 60;
            document.getElementById('rest-timer').textContent = `${m}:${s.toString().padStart(2, '0')}`;
        },

        stopTimer() {
            if (this.state.timerInterval) { clearInterval(this.state.timerInterval); this.state.timerInterval = null; }
        },

        nextClimb() {
            this.stopTimer();
            this.state.currentIndex = this.getRandomIndex();
            this.updateNextPreview();
            this.startClimb();
        },

        goHome() {
            this.stopTimer();
            this.state.currentIndex = this.getRandomIndex();
            this.updateNextPreview();
            this.showView('view-home');
        }
    };

    document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>
